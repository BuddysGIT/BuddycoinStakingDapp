'use client';
import { Identity } from '../../identity/components/Identity.js';
import { useBreakpoints } from '../../internal/hooks/useBreakpoints.js';
import { cn, pressable, color } from '../../styles/theme.js';
import { useMemo, Children, isValidElement, cloneElement } from 'react';
import { WalletBottomSheet } from './WalletBottomSheet.js';
import { useWalletContext } from './WalletProvider.js';
import { jsx } from 'react/jsx-runtime';
function WalletDropdown({
  children,
  className
}) {
  const breakpoint = useBreakpoints();
  const _useWalletContext = useWalletContext(),
    address = _useWalletContext.address,
    isSubComponentClosing = _useWalletContext.isSubComponentClosing,
    setIsSubComponentOpen = _useWalletContext.setIsSubComponentOpen,
    setIsSubComponentClosing = _useWalletContext.setIsSubComponentClosing;
  const childrenArray = useMemo(() => {
    return Children.toArray(children).map(child => {
      if (/*#__PURE__*/isValidElement(child) && child.type === Identity) {
        // @ts-ignore
        return /*#__PURE__*/cloneElement(child, {
          address
        });
      }
      return child;
    });
  }, [children, address]);
  if (!address) {
    return null;
  }
  if (!breakpoint) {
    return null;
  }
  if (breakpoint === 'sm') {
    return /*#__PURE__*/jsx(WalletBottomSheet, {
      className: className,
      children: children
    });
  }
  return /*#__PURE__*/jsx("div", {
    className: cn(pressable.default, color.foreground, 'absolute right-0 z-10 mt-1.5 flex w-max min-w-[300px] cursor-default flex-col overflow-hidden rounded-xl', isSubComponentClosing ? 'fade-out slide-out-to-top-1.5 animate-out fill-mode-forwards ease-in-out' : 'fade-in slide-in-from-top-1.5 animate-in duration-300 ease-out', className),
    onAnimationEnd: () => {
      if (isSubComponentClosing) {
        setIsSubComponentOpen(false);
        setIsSubComponentClosing(false);
      }
    },
    "data-testid": "ockWalletDropdown",
    children: childrenArray
  });
}
export { WalletDropdown };
//# sourceMappingURL=WalletDropdown.js.map
