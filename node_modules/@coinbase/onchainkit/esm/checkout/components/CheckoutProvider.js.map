{"version":3,"file":"CheckoutProvider.js","sources":["../../../src/checkout/components/CheckoutProvider.tsx"],"sourcesContent":null,"names":["emptyContext","CheckoutContext","createContext","useCheckoutContext","context","useContext","Error","CheckoutProvider","chargeHandler","children","isSponsored","onStatus","productId","config","appearance","paymaster","name","undefined","logo","useOnchainKit","address","chainId","isConnected","useAccount","connectAsync","useConnect","switchChainAsync","useSwitchChain","chargeId","setChargeId","useState","transactionId","setTransactionId","errorMessage","setErrorMessage","isSmartWallet","useIsWalletACoinbaseSmartWallet","fetchedDataUseEffect","useRef","fetchedDataHandleSubmit","userRejectedRef","contractsRef","insufficientBalanceRef","priceInUSDCRef","fetchData","useCallback","updateLifecycleStatus","statusName","CHECKOUT_LIFECYCLESTATUS","FETCHING_DATA","statusData","contracts","hydratedChargeId","insufficientBalance","priceInUSDC","error","fetchContracts","GENERIC_ERROR_MESSAGE","ERROR","code","CheckoutErrorCode","UNEXPECTED_ERROR","message","current","READY","lifecycleStatus","useLifecycleStatus","INIT","useCommerceContracts","status","writeContractsAsync","useWriteContracts","mutation","onSuccess","id","data","useCallsStatus","query","refetchInterval","state","enabled","transactionHash","receipts","receipt","useWaitForTransactionReceipt","hash","useEffect","PENDING","SUCCESS","transactionReceipts","receiptUrl","handleSubmit","window","open","USER_REJECTED_ERROR","connectedAddress","connectedChainId","accounts","_connectedChainId","connector","coinbaseWallet","appName","appLogoUrl","preference","NO_CONNECTED_ADDRESS_ERROR","base","height","width","getWindowDimensions","openPopup","url","target","length","NO_CONTRACTS_ERROR","capabilities","paymasterService","isUserRejectedError","includes","isUserRejectedRequestError","errorCode","JSON","stringify","value","useValue","onSubmit","_jsx","Provider"],"mappings":"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"}